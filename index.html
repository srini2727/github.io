import { useEffect, useState } from "react";
import { motion } from "framer-motion";
import { Github, Linkedin, Mail, Download, ExternalLink, ArrowUpRight, ChevronRight, Database, Cloud, GitBranch, Cpu, Wrench } from "lucide-react";

/**
 * Srinadh — Developer Portfolio (single-file React)
 * - Tailwind CSS utilities are available by default in Canvas
 * - Uses Framer Motion for animations (no extra setup needed here)
 *
 * How to customize quickly:
 * 1) Edit the PROFILE object.
 * 2) Update the PROJECTS list with your real projects.
 * 3) Replace resumeUrl with an actual link.
 * 4) Deploy to Vercel/Netlify when exported.
 */

const PROFILE = {
  name: "Srinadh Reddy Gade",
  role: "Senior Data Engineer • Analytics Engineer",
  location: "Chicago, USA",
  blurb:
    "I design and build cloud-native data platforms and analytics systems across Azure, AWS, and GCP. I love clean models, reliable pipelines, and fast insights.",
  resumeUrl: "https://example.com/Srinadh_Resume.pdf",
  socials: [
    { icon: Github, label: "GitHub", href: "https://github.com/iampriya20" },
    { icon: Linkedin, label: "LinkedIn", href: "https://www.linkedin.com/in/srinadh-reddy-gade" },
    { icon: Mail, label: "Email", href: "mailto:srinadh@example.com" },
  ],
  skills: [
    {
      title: "Data Engineering",
      icon: Database,
      items: ["SQL/T-SQL", "Python", "PySpark", "Airflow", "Kafka", "dbt"],
    },
    {
      title: "Cloud & Warehouses",
      icon: Cloud,
      items: ["Azure", "AWS", "GCP", "Snowflake", "BigQuery", "Databricks"],
    },
    {
      title: "Modeling & Quality",
      icon: GitBranch,
      items: ["Medallion", "Kimball", "SCDs", "DQ Checks", "Lineage", "RBAC"],
    },
    {
      title: "Performance & Ops",
      icon: Cpu,
      items: ["Delta/Parquet", "Partitioning", "Caching", "CI/CD", "Observability"],
    },
    {
      title: "Tools & Viz",
      icon: Wrench,
      items: ["Power BI", "Tableau", "Looker", "Streamlit", "Fabric"],
    },
  ],
};

const PROJECTS = [
  {
    name: "PBM Logistics 360 (GCP)",
    tags: ["GCP", "Pub/Sub", "Dataflow", "BigQuery", "Composer", "Streamlit"],
    description:
      "Real-time specialty pharmacy order tracking. Lambda-style architecture with Pub/Sub ingestion, Dataflow transforms, BigQuery modeling (Bronze→Silver→Gold), and Streamlit dashboards.",
    links: [
      { label: "Case Study", href: "#" },
      { label: "GitHub", href: "#" },
    ],
  },
  {
    name: "NYC Traffic Analytics (Azure)",
    tags: ["TomTom API", "Azure Functions", "ADLS Gen2", "Databricks", "Teradata", "ADF"],
    description:
      "Ingest 10‑mile radius traffic data, transform in Databricks (Bronze→Silver→Gold), warehouse in Teradata, and visualize with Power BI.",
    links: [
      { label: "Dashboard", href: "#" },
      { label: "GitHub", href: "#" },
    ],
  },
  {
    name: "Hospital Ops Analytics (Snowflake)",
    tags: ["Snowflake", "dbt", "Airflow", "Power BI", "Medallion"],
    description:
      "Three-hospital unified model with Bronze→Silver→Gold layers, dbt transformations, data quality checks, and executive dashboards.",
    links: [
      { label: "Writeup", href: "#" },
      { label: "Repo", href: "#" },
    ],
  },
];

const EXPERIENCE = [
  {
    company: "T‑Mobile Modernization (Portfolio)",
    role: "Data Engineer",
    period: "2024 — 2025",
    bullets: [
      "Replatformed SQL Server workloads to ADLS + Databricks with Delta Lake.",
      "Implemented Bronze→Silver→Gold with quality gates and lineage.",
    ],
  },
  {
    company: "Hanover Insurance",
    role: "Data Engineer",
    period: "2023 — 2024",
    bullets: [
      "Built Snowflake ELT with dbt and automated dbt Cloud deployments.",
      "Power BI semantic model for finance & claims leaders.",
    ],
  },
  {
    company: "Ascension Health (Portfolio)",
    role: "Data Engineer",
    period: "2022 — 2023",
    bullets: [
      "HIPAA-aware pipelines with PII masking and role-based access.",
      "Operational dashboards for patient throughput and scheduling.",
    ],
  },
];

function Section({ id, title, children, className = "" }) {
  return (
    <section id={id} className={`scroll-mt-24 py-16 md:py-24 ${className}`}>
      <div className="max-w-6xl mx-auto px-6">
        <motion.h2
          initial={{ opacity: 0, y: 16 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true, amount: 0.3 }}
          transition={{ duration: 0.5 }}
          className="text-3xl md:text-4xl font-bold tracking-tight"
        >
          {title}
        </motion.h2>
        <div className="mt-8">{children}</div>
      </div>
    </section>
  );
}

function Nav() {
  const [open, setOpen] = useState(false);
  useEffect(() => {
    const onScroll = () => setOpen(false);
    window.addEventListener("scroll", onScroll);
    return () => window.removeEventListener("scroll", onScroll);
  }, []);
  const links = [
    { href: "#about", label: "About" },
    { href: "#skills", label: "Skills" },
    { href: "#projects", label: "Projects" },
    { href: "#experience", label: "Experience" },
    { href: "#contact", label: "Contact" },
  ];
  return (
    <nav className="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/50 bg-white/70 dark:bg-neutral-900/70 border-b border-neutral-200/50 dark:border-neutral-800">
      <div className="max-w-6xl mx-auto px-6 h-16 flex items-center justify-between">
        <a href="#home" className="font-semibold tracking-tight">{PROFILE.name.split(" ")[0]}</a>
        <div className="hidden md:flex gap-6 items-center">
          {links.map((l) => (
            <a key={l.href} href={l.href} className="text-sm hover:opacity-80">
              {l.label}
            </a>
          ))}
          <a
            href={PROFILE.resumeUrl}
            className="inline-flex items-center gap-2 text-sm px-3 py-1.5 rounded-xl border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800"
          >
            <Download className="w-4 h-4" /> Resume
          </a>
        </div>
        <button
          className="md:hidden p-2 rounded-lg border border-neutral-300 dark:border-neutral-700"
          onClick={() => setOpen(!open)}
          aria-label="Toggle menu"
        >
          <ChevronRight className={`w-5 h-5 transition-transform ${open ? "rotate-90" : ""}`} />
        </button>
      </div>
      {open && (
        <div className="md:hidden px-6 pb-4 space-y-2">
          {links.map((l) => (
            <a key={l.href} href={l.href} className="block text-sm py-1">
              {l.label}
            </a>
          ))}
          <a href={PROFILE.resumeUrl} className="inline-flex items-center gap-2 text-sm">
            <Download className="w-4 h-4" /> Resume
          </a>
        </div>
      )}
    </nav>
  );
}

function Hero() {
  return (
    <header id="home" className="relative overflow-hidden">
      <div className="absolute inset-0 -z-10 bg-gradient-to-b from-neutral-50 to-white dark:from-neutral-900 dark:to-neutral-950" />
      <div className="max-w-6xl mx-auto px-6 py-24 md:py-32">
        <motion.p
          initial={{ opacity: 0, y: 10 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.05, duration: 0.6 }}
          className="text-sm uppercase tracking-[0.2em] text-neutral-500"
        >
          {PROFILE.location}
        </motion.p>
        <motion.h1
          initial={{ opacity: 0, y: 12 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.15, duration: 0.7 }}
          className="mt-4 text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight"
        >
          {PROFILE.name}
        </motion.h1>
        <motion.h2
          initial={{ opacity: 0, y: 12 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.25, duration: 0.7 }}
          className="mt-3 text-lg md:text-xl text-neutral-600 dark:text-neutral-300"
        >
          {PROFILE.role}
        </motion.h2>
        <motion.p
          initial={{ opacity: 0, y: 12 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.35, duration: 0.7 }}
          className="mt-6 max-w-2xl text-neutral-700 dark:text-neutral-300"
        >
          {PROFILE.blurb}
        </motion.p>
        <motion.div
          initial={{ opacity: 0, y: 12 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ delay: 0.45, duration: 0.7 }}
          className="mt-8 flex flex-wrap gap-3"
        >
          <a
            href={PROFILE.resumeUrl}
            className="inline-flex items-center gap-2 px-4 py-2 rounded-2xl border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800"
          >
            <Download className="w-4 h-4" /> Download Resume
          </a>
          {PROFILE.socials.map((s) => (
            <a
              key={s.label}
              href={s.href}
              className="inline-flex items-center gap-2 px-4 py-2 rounded-2xl border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800"
            >
              <s.icon className="w-4 h-4" /> {s.label}
            </a>
          ))}
        </motion.div>
      </div>
    </header>
  );
}

function About() {
  return (
    <Section id="about" title="About">
      <div className="grid md:grid-cols-3 gap-8">
        <motion.p
          initial={{ opacity: 0, y: 10 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5 }}
          className="md:col-span-2 text-neutral-700 dark:text-neutral-300"
        >
          I’m a data engineer who enjoys solving messy data problems with simple, reliable systems. I’ve shipped pipelines and models across Azure, AWS, and GCP, and I love the craft of great data modeling, observability, and stakeholder‑friendly dashboards.
        </motion.p>
        <motion.div
          initial={{ opacity: 0, y: 10 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5, delay: 0.1 }}
          className="rounded-2xl border border-neutral-200 dark:border-neutral-800 p-5"
        >
          <div className="text-sm text-neutral-500">Currently</div>
          <div className="font-medium mt-1">Building portfolio projects & interviewing</div>
          <div className="mt-2 text-sm text-neutral-600 dark:text-neutral-400">
            Open to roles in Data Engineering / Analytics Engineering.
          </div>
        </motion.div>
      </div>
    </Section>
  );
}

function Skills() {
  return (
    <Section id="skills" title="Skills">
      <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {PROFILE.skills.map((cat, i) => (
          <motion.div
            key={cat.title}
            initial={{ opacity: 0, y: 12 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true, amount: 0.3 }}
            transition={{ duration: 0.5, delay: i * 0.05 }}
            className="rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6"
          >
            <div className="flex items-center gap-3">
              <cat.icon className="w-5 h-5" />
              <h3 className="font-semibold">{cat.title}</h3>
            </div>
            <div className="mt-3 flex flex-wrap gap-2">
              {cat.items.map((t) => (
                <span
                  key={t}
                  className="text-xs px-2 py-1 rounded-xl border border-neutral-200 dark:border-neutral-700"
                >
                  {t}
                </span>
              ))}
            </div>
          </motion.div>
        ))}
      </div>
    </Section>
  );
}

function Projects() {
  return (
    <Section id="projects" title="Selected Projects">
      <div className="grid md:grid-cols-2 gap-6">
        {PROJECTS.map((p, idx) => (
          <motion.article
            key={p.name}
            initial={{ opacity: 0, y: 12 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true }}
            transition={{ duration: 0.5, delay: idx * 0.05 }}
            className="rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6 hover:shadow-sm"
          >
            <div className="flex items-start justify-between gap-4">
              <h3 className="text-lg font-semibold">{p.name}</h3>
              <ArrowUpRight className="w-4 h-4 opacity-60" />
            </div>
            <p className="mt-2 text-neutral-700 dark:text-neutral-300">{p.description}</p>
            <div className="mt-3 flex flex-wrap gap-2">
              {p.tags.map((t) => (
                <span key={t} className="text-xs px-2 py-1 rounded-xl border border-neutral-200 dark:border-neutral-700">
                  {t}
                </span>
              ))}
            </div>
            <div className="mt-4 flex flex-wrap gap-3">
              {p.links.map((l) => (
                <a
                  key={l.label}
                  href={l.href}
                  className="inline-flex items-center gap-1 text-sm hover:underline"
                >
                  {l.label} <ExternalLink className="w-3.5 h-3.5" />
                </a>
              ))}
            </div>
          </motion.article>
        ))}
      </div>
    </Section>
  );
}

function Experience() {
  return (
    <Section id="experience" title="Experience">
      <div className="space-y-4">
        {EXPERIENCE.map((e, idx) => (
          <motion.div
            key={e.company}
            initial={{ opacity: 0, y: 12 }}
            whileInView={{ opacity: 1, y: 0 }}
            viewport={{ once: true }}
            transition={{ duration: 0.5, delay: idx * 0.05 }}
            className="rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6"
          >
            <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-2">
              <div>
                <div className="text-sm text-neutral-500">{e.period}</div>
                <div className="font-semibold">{e.role}</div>
                <div className="text-neutral-700 dark:text-neutral-300">{e.company}</div>
              </div>
            </div>
            <ul className="mt-3 space-y-2 list-disc list-inside text-neutral-700 dark:text-neutral-300">
              {e.bullets.map((b, i) => (
                <li key={i}>{b}</li>
              ))}
            </ul>
          </motion.div>
        ))}
      </div>
    </Section>
  );
}

function Contact() {
  return (
    <Section id="contact" title="Contact">
      <div className="grid md:grid-cols-2 gap-8 items-start">
        <motion.div
          initial={{ opacity: 0, y: 12 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5 }}
        >
          <p className="text-neutral-700 dark:text-neutral-300">
            Interested in collaborating or hiring me? I’m open to roles in data engineering and analytics engineering. Drop a note and I’ll get back soon.
          </p>
          <div className="mt-6 flex flex-wrap gap-3">
            {PROFILE.socials.map((s) => (
              <a key={s.label} href={s.href} className="inline-flex items-center gap-2 px-4 py-2 rounded-2xl border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800">
                <s.icon className="w-4 h-4" /> {s.label}
              </a>
            ))}
          </div>
        </motion.div>

        <motion.form
          initial={{ opacity: 0, y: 12 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5, delay: 0.1 }}
          className="rounded-2xl border border-neutral-200 dark:border-neutral-800 p-6"
          onSubmit={(e) => {
            e.preventDefault();
            alert("Thanks! This demo form doesn't send yet — wire it to Formspree, Beehiiv, or a serverless function.");
          }}
        >
          <div className="grid gap-4">
            <div>
              <label className="block text-sm mb-1">Name</label>
              <input required className="w-full rounded-xl border border-neutral-300 dark:border-neutral-700 bg-transparent px-3 py-2" placeholder="Your name" />
            </div>
            <div>
              <label className="block text-sm mb-1">Email</label>
              <input type="email" required className="w-full rounded-xl border border-neutral-300 dark:border-neutral-700 bg-transparent px-3 py-2" placeholder="you@company.com" />
            </div>
            <div>
              <label className="block text-sm mb-1">Message</label>
              <textarea required rows={4} className="w-full rounded-xl border border-neutral-300 dark:border-neutral-700 bg-transparent px-3 py-2" placeholder="Say hi…" />
            </div>
            <button className="inline-flex items-center gap-2 justify-center px-4 py-2 rounded-2xl border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-50 dark:hover:bg-neutral-800">
              Send <ArrowUpRight className="w-4 h-4" />
            </button>
          </div>
        </motion.form>
      </div>
    </Section>
  );
}

function Footer() {
  return (
    <footer className="py-12 border-t border-neutral-200 dark:border-neutral-800">
      <div className="max-w-6xl mx-auto px-6 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-neutral-500">
        <div>© {new Date().getFullYear()} {PROFILE.name}. All rights reserved.</div>
        <div className="flex items-center gap-3">
          {PROFILE.socials.map((s) => (
            <a key={s.label} href={s.href} className="hover:underline">{s.label}</a>
          ))}
        </div>
      </div>
    </footer>
  );
}

export default function App() {
  // optional: dark mode toggle based on system preference
  useEffect(() => {
    const mq = window.matchMedia('(prefers-color-scheme: dark)');
    const apply = () => {
      if (mq.matches) document.documentElement.classList.add('dark');
      else document.documentElement.classList.remove('dark');
    };
    apply();
    mq.addEventListener('change', apply);
    return () => mq.removeEventListener('change', apply);
  }, []);

  return (
    <div className="min-h-screen bg-white text-neutral-900 dark:bg-neutral-950 dark:text-white">
      <Nav />
      <Hero />
      <About />
      <Skills />
      <Projects />
      <Experience />
      <Contact />
      <Footer />
    </div>
  );
}
